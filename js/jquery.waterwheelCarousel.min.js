$(document).ready(function(){$(".ktrv").waterwheelCarousel({})}),function(t){"use strict";t.fn.waterwheelCarousel=function(e){function i(t){clearTimeout(d.autoPlayTimer),t||0===c.autoPlay||(d.autoPlayTimer=setTimeout(function(){r(c.autoPlay>0?"forward":"backward")},Math.abs(c.autoPlay)))}function n(t,e){var i=Math.abs(e);if(i<c.flankingItems+1)n=d.calculations[i];else var n=d.calculations[c.flankingItems+1];var a=Math.pow(c.sizeMultiplier,i),o=a*t.data("original_width"),r=a*t.data("original_height"),s=(Math.abs(t.width()-o),Math.abs(t.height()-r),n.offset),l=n.distance;if(e<0&&(l*=-1),"horizontal"==c.orientation)var h=(m=d.containerWidth/2)+l-o/2,u=c.horizon-s-r/2;else var m=d.containerHeight/2,h=c.horizon-s-o/2,u=m+l-r/2;var f;f=0===e?1:n.opacity;var g=c.flankingItems+2-i;t.data("width",o),t.data("height",r),t.data("top",u),t.data("left",h),t.data("oldPosition",t.data("currentPosition")),t.data("depth",g),t.data("opacity",f)}function a(t,e){Math.abs(e)<=c.flankingItems+1?(n(t,e),d.itemsAnimating++,t.css("z-index",t.data().depth).animate({left:t.data().left,width:t.data().width,height:t.data().height,top:t.data().top,opacity:t.data().opacity},d.currentSpeed,c.animationEasing,function(){!function(t,e){d.itemsAnimating--,t.data("currentPosition",e),0===e&&(d.currentCenterItem=t);0===d.itemsAnimating&&(d.carouselRotationsLeft-=1,d.currentlyMoving=!1,d.carouselRotationsLeft>0?o(0):(d.currentSpeed=c.speed,d.currentCenterItem.addClass(c.activeClassName),!1===d.performingSetup&&(c.movedToCenter(d.currentCenterItem),c.movedFromCenter(d.previousCenterItem)),d.performingSetup=!1,i()))}(t,e)})):(t.data("currentPosition",e),0===t.data("oldPosition")&&t.css({left:t.data().left,width:t.data().width,height:t.data().height,top:t.data().top,opacity:t.data().opacity,"z-index":t.data().depth}))}function o(e){if(!1===d.currentlyMoving){d.currentCenterItem.removeClass(c.activeClassName),d.currentlyMoving=!0,d.itemsAnimating=0,d.carouselRotationsLeft+=e,!0===c.quickerForFurther&&(e>1&&(d.currentSpeed=c.speed/e),d.currentSpeed=d.currentSpeed<100?100:d.currentSpeed);for(var i=0;i<d.totalItems;i++){var n,o=t(d.items[i]),r=o.data("currentPosition"),s=(n="forward"==d.currentDirection?r-1:r+1)>0?d.rightItemsCount:d.leftItemsCount;Math.abs(n)>s&&(n=-1*r,d.totalItems%2==0&&(n+=1)),a(o,n)}}}function r(t){!1===d.currentlyMoving&&(d.previousCenterItem=d.currentCenterItem,c.movingFromCenter(d.currentCenterItem),"backward"==t?(c.movingToCenter(function(){var t=d.currentCenterItem.prev();return t.length<=0&&(t=d.currentCenterItem.parent().children().last()),t}()),d.currentDirection="backward"):"forward"==t&&(c.movingToCenter(function(){var t=d.currentCenterItem.next();return t.length<=0&&(t=d.currentCenterItem.parent().children().first()),t}()),d.currentDirection="forward")),o(1)}if(this.length>1)return this.each(function(){t(this).waterwheelCarousel(e)}),this;var s=this,c={},d={};return t(this).find("div.wwkt").bind("click",function(){var e=t(this).data().currentPosition;if(0!=c.imageNav&&!(Math.abs(e)>=c.flankingItems+1)){d.currentlyMoving&&(d.currentlyMoving=!1),d.previousCenterItem=d.currentCenterItem,i(!0),c.autoPlay=0;var n=Math.abs(e);0==e?c.clickedCenter(t(this)):(c.movingFromCenter(d.currentCenterItem),c.movingToCenter(t(this)),e<0?(d.currentDirection="backward",o(n)):e>0&&(d.currentDirection="forward",o(n)))}}),t(this).find("div.wwkt").on("mousedown",function(t){d.mcox=t.pageX}),t(this).find("div.wwkt").on("mousemove",function(t){d.cox=t.pageX}),t(this).find("div.wwkt").on("mouseup",function(t){d.mcox<d.cox&&(d.currentDirection="backward",o(Math.abs(1))),d.mcox>d.cox&&(d.currentDirection="forward",o(Math.abs(1))),d.previousCenterItem=d.currentCenterItem}),t(this).find("a").bind("click",function(e){var i=0==t(this).find("div.wwkt").data("currentPosition");if(1===c.linkHandling||2===c.linkHandling&&!i)return e.preventDefault(),!1}),t(document).keydown(function(t){if(c.keyboardNav&&(37===t.which&&"horizontal"==c.orientation||38===t.which&&"vertical"==c.orientation?(i(!0),c.autoPlay=0,r("backward")):(39===t.which&&"horizontal"==c.orientation||40===t.which&&"vertical"==c.orientation)&&(i(!0),c.autoPlay=0,r("forward")),c.keyboardNavOverride&&("horizontal"==c.orientation&&(37===t.which||39===t.which)||"vertical"==c.orientation&&(38===t.which||40===t.which))))return t.preventDefault(),!1}),this.reload=function(e){if("object"==typeof e);else;c=t.extend({},t.fn.waterwheelCarousel.defaults,e),(d={itemsContainer:t(s),totalItems:t(s).find("div.wwkt").length,containerWidth:t(s).width(),containerHeight:t(s).height(),currentCenterItem:null,previousCenterItem:null,items:[],calculations:[],carouselRotationsLeft:0,currentlyMoving:!1,itemsAnimating:0,currentSpeed:c.speed,intervalTimer:null,currentDirection:"forward",leftItemsCount:0,rightItemsCount:0,performingSetup:!0,cox:-1,mcox:0}).itemsContainer.find("div.wwkt").removeClass(c.activeClassName),d.itemsContainer.find("div.wwkt").hide(),c.forcedImageWidth&&c.forcedImageHeight&&d.itemsContainer.find("div.wwkt").each(function(){t(this).width(c.forcedImageWidth),t(this).height(c.forcedImageHeight)}),function(e){if(!1!==c.preloadImages){var i=d.itemsContainer.find("div.wwkt img"),n=0,a=i.length;i.each(function(){t(this).bind("load",function(){(n+=1)!==a||e()}),t(this).attr("src",t(this).attr("src")),this.complete})}else e()}(function(){d.itemsContainer.find("div.wwkt").each(function(){(void 0==t(this).data("original_width")||c.forcedImageWidth>0)&&t(this).data("original_width",t(this).width()),(void 0==t(this).data("original_height")||c.forcedImageHeight>0)&&t(this).data("original_height",t(this).height())}),function(){d.itemsContainer.find("div.wwkt:first"),d.calculations[0]={distance:0,offset:0,opacity:1};for(var t=c.horizonOffset,e=c.separation,i=1;i<=c.flankingItems+2;i++)i>1&&(t*=c.horizonOffsetMultiplier,e*=c.separationMultiplier),d.calculations[i]={distance:d.calculations[i-1].distance+e,offset:d.calculations[i-1].offset+t,opacity:d.calculations[i-1].opacity*c.opacityMultiplier};c.edgeFadeEnabled?d.calculations[c.flankingItems+1].opacity=0:d.calculations[c.flankingItems+1]={distance:0,offset:0,opacity:0}}(),function(){d.items=d.itemsContainer.find("div.wwkt");for(var e=0;e<d.totalItems;e++)d.items[e]=t(d.items[e]);0===c.horizon&&("horizontal"===c.orientation?c.horizon=d.containerHeight/2:c.horizon=d.containerWidth/2),d.itemsContainer.css("position","relative").find("div.wwkt").each(function(){var e,i;"horizontal"===c.orientation?(e=d.containerWidth/2-t(this).data("original_width")/2,i=c.horizon-t(this).data("original_height")/2):(e=c.horizon-t(this).data("original_width")/2,i=d.containerHeight/2-t(this).data("original_height")/2),t(this).css({left:e,top:i,visibility:"visible",position:"absolute","z-index":0,opacity:0}).data({top:i,left:e,oldPosition:0,currentPosition:0,depth:0,opacity:0}).show()})}(),function(){c.startingItem=0===c.startingItem?Math.round(d.totalItems/2):c.startingItem,d.rightItemsCount=Math.ceil((d.totalItems-1)/2),d.leftItemsCount=Math.floor((d.totalItems-1)/2),d.carouselRotationsLeft=1,a(d.items[c.startingItem-1],0),d.items[c.startingItem-1].css("opacity",1);for(var t=c.startingItem-1,e=1;e<=d.rightItemsCount;e++)t<d.totalItems-1?t+=1:t=0,d.items[t].css("opacity",1),a(d.items[t],e);for(var t=c.startingItem-1,e=-1;e>=-1*d.leftItemsCount;e--)t>0?t-=1:t=d.totalItems-1,d.items[t].css("opacity",1),a(d.items[t],e)}()})},this.next=function(){i(!0),c.autoPlay=0,r("forward")},this.prev=function(){i(!0),c.autoPlay=0,r("backward")},this.reload(e),this},t.fn.waterwheelCarousel.defaults={startingItem:1,separation:100,separationMultiplier:.6,horizonOffset:0,horizonOffsetMultiplier:1,sizeMultiplier:.8,opacityMultiplier:.9,horizon:0,flankingItems:3,speed:500,animationEasing:"linear",quickerForFurther:!0,edgeFadeEnabled:!1,linkHandling:2,autoPlay:0,orientation:"horizontal",activeClassName:"carousel-center",keyboardNav:!1,keyboardNavOverride:!0,imageNav:!0,preloadImages:!1,forcedImageWidth:152,forcedImageHeight:206,movingToCenter:t.noop,movedToCenter:t.noop,clickedCenter:t.noop,movingFromCenter:t.noop,movedFromCenter:t.noop}}(jQuery);